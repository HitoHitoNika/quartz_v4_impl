---
tags:
  - spring
  - Java
  - Guide
---
Zurück zu [[00. Spring Übersicht]]

Um mit einer Datenbank zu interagieren wird meist ein DAO (Data Access Object) verwendet.
Außerdem wird ein JPA Entity Manager benötigt. Die Hauptaufgabe des Entity Managers ist Entities zu speichern oder abzurufen.

Normalerweise braucht der Entity Manager eine Datenquelle, welche die Verbindungsinformationen zur Datenbank beinhaltet. Spring Boot erstellt beides automatisch basierend auf der application.properties Datei, wodurch wir den Entity Manger [[11. Spring Container#Dependency Injection|injecten]] können.

## Entwicklungsprozess des DAOs

### Schritt 1: DAO Interface definieren

```java
public interface StudentDAO{

	void save(Student theStudent);
	
}
```

### Schritt 2: DAO Implementierung

```java
@Repository
public class StudentDAOImpl implements StudentDAO {

	private EntityManager entityManager;

	@Autowired
	public StudentDAOImpl(EntityManager theEntityManager){
		entityManager=theEntityManager;
	}

	@Override
	@Transactional
	public void save(Student theStudent){
		entityManager.persist(theStudent);
	}
}
```

>[!info] Spring Boot @Transactional
Normalerweise werden Transactionen zu einer Datenbank gestartet und beendet. Mit @Transactional können wir jedoch unseren JPA Code automatisch eine Transaction starten und beenden lassen.
> **Diese Annotation stammt von Spring Boot und ist daher nicht üblich im Umgang mit JPA Code**

>[!info] Spring Boot @Repository
>@Repository ist eine untergeordnete Annotation der @Component. Ähnlich wie der @RestController wird diese trotzdem vom Component scanning erkannt, jedoch als eine DAO Implementierung.
>Spring liefert hier Umgang von Exceptions welche von JDBC stammen.

### Schritt 3: Anwendung anpassen

Selbstverständlich ist das je nach Anwendung individuell zu lösen, ich gebe hier eine Beispiel Lösung zum einfachen Verständnis.

```java
@SpringBootApplication
public class CruddemoApplication{

	public static void main(String[] args){
		SpringApplication.run(CruddemoApplication.class,args);
	}

	@Bean
	public CommandLineRunner commandLineRunner(StudentDAO studentDAO) {
		return runner -> {
		 createStudent(studentDAO);
		 };
	}

	private void createStudent(StudentDAO studentDAO){
	//Erstellen des Objektes
	System.out.println("Neuer Student wird erstellt");
	Student tempStudent = new Student("Max","Mustermann","max@mustermail.de");

	//Speichern des Objektes
	System.out.println("Student wird gespeichert");
	studentDAO.save(tempStudent);

	//Anzeigen der ID
	System.out.println("Gespeicherter Student, Generierte ID: "+tempStudent.getId());
	}
}
```



**Next :** 